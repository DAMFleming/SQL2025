DROP DATABASE IF EXISTS ENVIOS;
CREATE DATABASE ENVIOS;
USE ENVIOS;

CREATE TABLE PROVEEDORES (
	`P#` VARCHAR(13) PRIMARY KEY,
    NOMBRE VARCHAR(50) NOT NULL,
    CATEGORIA INT NOT NULL,
    CIUDAD VARCHAR(50) NOT NULL
);

CREATE TABLE COMPONENTES (
	`C#` VARCHAR(13) PRIMARY KEY,
    NOMBRE VARCHAR(50) NOT NULL,
    COLOR VARCHAR(20) NOT NULL,
    PESO INT NOT NULL,
    CIUDAD VARCHAR(50) NOT NULL
);

CREATE TABLE ARTICULOS (
	`T#` VARCHAR(13) PRIMARY KEY,
    NOMBRE VARCHAR(50) NOT NULL,
    CIUDAD VARCHAR(50) NOT NULL
);

CREATE TABLE ENVIOS (
	`P#` VARCHAR(13),
    `C#` VARCHAR(13),
    `T#` VARCHAR(13),
    CANTIDAD INT,
    PRIMARY KEY (`P#`, `C#`, `T#`),
    FOREIGN KEY (`P#`) REFERENCES PROVEEDORES(`P#`)
		ON DELETE RESTRICT
        ON UPDATE CASCADE,
	FOREIGN KEY (`C#`) REFERENCES COMPONENTES(`C#`)
		ON DELETE RESTRICT
        ON UPDATE CASCADE,
	FOREIGN KEY (`T#`) REFERENCES ARTICULOS(`T#`)
		ON DELETE RESTRICT
        ON UPDATE CASCADE
);


INSERT INTO PROVEEDORES VALUES
('P1', 'CARLOS', 20, 'SEVILLA'),
('P2', 'JUAN', 10, 'MADRID'),
('P3', 'JOSE', 30, 'SEVILLA'),
('P4', 'INMA', 20, 'SEVILLA'),
('P5', 'EVA', 30, 'CACERES');

INSERT INTO COMPONENTES VALUES
('C1', 'X3A', 'ROJO', 12, 'SEVILLA'),
('C2', 'B85', 'VERDE', 17, 'MADRID'),
('C3', 'C4B', 'AZUL', 17, 'MALAGA'),
('C4', 'C4B', 'ROJO', 14, 'SEVILLA'),
('C5', 'VT8', 'AZUL', 12, 'MADRID'),
('C6', 'C30', 'ROJO', 19, 'SEVILLA');

INSERT INTO ARTICULOS VALUES
('T1', 'CLASIFICADORA', 'MADRID'),
('T2', 'PERFORADORA', 'MALAGA'),
('T3', 'LECTORA', 'CACERES'),
('T4', 'CONSOLA', 'CACERES'),
('T5', 'MEZCLADORA', 'SEVILLA'),
('T6', 'TERMINAL', 'BARCELONA'),
('T7', 'CINTA', 'SEVILLA');

INSERT INTO ENVIOS VALUES
('P1', 'C1', 'T1', 200),
('P1', 'C1', 'T4', 700),
('P2', 'C3', 'T1', 400),
('P2', 'C3', 'T2', 200),
('P2', 'C3', 'T3', 200),
('P2', 'C3', 'T4', 500),
('P2', 'C3', 'T5', 600),
('P2', 'C3', 'T6', 400),
('P2', 'C3', 'T7', 800),
('P2', 'C5', 'T2', 100),
('P3', 'C3', 'T1', 200),
('P3', 'C4', 'T2', 500),
('P4', 'C6', 'T3', 300),
('P4', 'C6', 'T7', 300),
('P5', 'C2', 'T2', 200),
('P5', 'C2', 'T4', 100),
('P5', 'C5', 'T4', 500),
('P5', 'C5', 'T7', 100),
('P5', 'C6', 'T2', 200),
('P5', 'C1', 'T4', 100),
('P5', 'C3', 'T4', 200),
('P5', 'C4', 'T4', 800),
('P5', 'C5', 'T5', 400),
('P5', 'C6', 'T4', 500);